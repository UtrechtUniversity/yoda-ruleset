{"openapi": "3.0.0", "info": {"description": "Yoda core ruleset containing iRODS and Python rules and policies useful for all Yoda environments.", "contact": {"email": "l.r.westerhof@uu.nl"}, "version": "1.10.0", "title": "Yoda intake API"}, "servers": [{"url": "https://portal.yoda.test/api", "description": "Local Yoda development server"}], "security": [{"cookieAuth": []}, {"basicAuth": []}], "components": {"schemas": {"result_error": {"type": "object", "properties": {"status": {"type": "string", "description": "Holds an error ID"}, "status_info": {"type": "string", "description": "Holds a human-readable error description"}, "data": {"description": "empty", "nullable": true, "type": "object"}}}}, "securitySchemes": {"cookieAuth": {"in": "cookie", "type": "apiKey", "name": "yoda_session"}, "basicAuth": {"type": "http", "scheme": "basic"}}, "responses": {"status_400": {"description": "Bad request", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/result_error"}}}}, "status_500": {"description": "Internal error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/result_error"}}}}}}, "paths": {"/intake_list_studies": {"post": {"tags": ["intake"], "summary": "Get list of all studies current user is involved in.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_list_dm_studies": {"post": {"tags": ["intake"], "summary": "Return list of studies current user is datamanager of.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_count_total_files": {"post": {"tags": ["intake"], "summary": "Get the total count of all files in collection\n    .\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["coll"], "type": "object", "properties": {"coll": {"default": null, "type": "string", "description": "Collection from which to count all datasets"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_list_unrecognized_files": {"post": {"tags": ["intake"], "summary": "Get list of all unrecognized files for given path including relevant metadata.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["coll"], "type": "object", "properties": {"coll": {"default": null, "type": "string", "description": "Collection from which to list all unrecognized files"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_list_datasets": {"post": {"tags": ["intake"], "summary": "Get list of datasets for given path.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["coll"], "type": "object", "properties": {"coll": {"default": null, "type": "string", "description": "Collection from which to list all datasets"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_scan_for_datasets": {"post": {"tags": ["intake"], "summary": "The toplevel of a dataset can be determined by attribute 'dataset_toplevel'\n    and can either be a collection or a data_object.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["coll"], "type": "object", "properties": {"coll": {"default": null, "type": "string", "description": "Collection to scan for datasets"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_lock_dataset": {"post": {"tags": ["intake"], "summary": "Lock datasets as an indication it can be 'frozen' for it to progress to vault.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["path", "dataset_ids"], "type": "object", "properties": {"path": {"default": null, "type": "string", "description": "Collection for which to lock a specific dataset id"}, "dataset_ids": {"default": null, "type": "string", "description": "Comma separated identifiers of datasets to be locked"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_unlock_dataset": {"post": {"tags": ["intake"], "summary": "Unlock a dataset to remove the indication so it can be 'frozen' for it to progress to vault\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["path", "dataset_ids"], "type": "object", "properties": {"path": {"default": null, "type": "string", "description": "Collection for which to lock a specific dataset id"}, "dataset_ids": {"default": null, "type": "string", "description": "Comma separated identifiers of datasets to be locked"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_dataset_add_comment": {"post": {"tags": ["intake"], "summary": "Add a comment to a dataset.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["study_id", "dataset_id", "comment"], "type": "object", "properties": {"study_id": {"default": null, "type": "string", "description": "Id of the study given dataset belongs to"}, "dataset_id": {"default": null, "type": "string", "description": "Identifier of the dataset to add a comment to"}, "comment": {"default": null, "type": "string", "description": "Comment as added by user"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_dataset_get_details": {"post": {"tags": ["intake"], "summary": "Get all details for a dataset (errors/warnings, scanned by who/when, comments, file tree).\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["coll", "dataset_id"], "type": "object", "properties": {"coll": {"default": null, "type": "string", "description": "Collection to start from"}, "dataset_id": {"default": null, "type": "string", "description": "Identifier of the dataset to get details for"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_report_vault_dataset_counts_per_study": {"post": {"tags": ["intake"], "summary": "Get the count of datasets wave/experimenttype.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["study_id"], "type": "object", "properties": {"study_id": {"default": null, "type": "string", "description": "Study id"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_report_vault_aggregated_info": {"post": {"tags": ["intake"], "summary": "Collects the following information for Raw, Processed datasets.\n    Including a totalisation of this all (Raw/processed is kept in VERSION).\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["study_id"], "type": "object", "properties": {"study_id": {"default": null, "type": "string", "description": "Study id"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}, "/intake_report_export_study_data": {"post": {"tags": ["intake"], "summary": "Find all datasets in the vault for $studyID.\n", "requestBody": {"required": true, "content": {"application/json": {"schema": {"required": ["study_id"], "type": "object", "properties": {"study_id": {"default": null, "type": "string", "description": "Study id to get a report from"}}}}}}, "responses": {"200": {"description": "Success", "content": {"application/json": {"schema": {"type": "object", "properties": {"status": {"type": "string"}, "status_info": {"type": "string", "nullable": true}, "data": {"nullable": true}}}}}}, "400": {"$ref": "#/components/responses/status_400"}, "500": {"$ref": "#/components/responses/status_500"}}}}}}

{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "required": [
    "evaluation"
  ],
  "properties": {
    "evaluation": {
      "type": "string",
      "title": "This data request is:",
      "enum": [
        "Approved",
        "Rejected (resubmit)",
        "Rejected"
      ]
    },
    "internal_remarks": {
      "type": "string",
      "title": "Internal remarks, if any. Mandatory if data request is rejected. The researcher cannot read these remarks."
    }
  },
  "dependencies": {
    "evaluation": {
      "oneOf": [
        {
          "properties": {
            "evaluation": {
              "enum": [
                "Approved"
              ]
            },
            "approval_conditions": {
              "type": "string",
              "title": "Approval conditions, if any. The researcher will be informed of these conditions and will have to consent to them to proceed with the data request."
            },
            "dta_type": {
              "type": "string",
              "enum": [
                "YOUth researcher employed at the UU",
                "Researchers employed at the UU outside of YOUth",
                "Researchers employed at UMCU",
                "Researchers employed outside of the UU and outside the UMCU",
                "Other (please specify below)"
              ],
              "title": "Please specify the type of DTA to be used for processing this data request."
            }
          },
          "required": [
            "dta_type"
          ]
        },
        {
          "properties": {
            "evaluation": {
              "enum": [
                "Rejected (resubmit)",
                "Rejected"
              ]
            },
            "feedback_for_researcher": {
              "type": "string",
              "title": "Feedback for researcher",
              "description": "Please provide feedback to the researcher in case of rejection here. This feedback will be included in the rejection email."
            }
          },
          "required": [
            "internal_remarks", "feedback_for_researcher"
          ]
        }
      ]
    },
    "dta_type": {
      "oneOf": [
        {
          "properties": {
            "dta_type": {
              "enum": [
                "YOUth researcher employed at the UU"
              ]
            },
            "dta_mandatee_approval_required": {
              "type": "string",
              "enum": [
                "No"
              ],
              "default": "No",
              "title": "Should the DTA be signed off by mandatees (i.e. the responsible scientist and the authorized official)?"
            }
          }
        },
        {
          "properties": {
            "dta_type": {
              "enum": [
                "Researchers employed at the UU outside of YOUth",
                "Researchers employed at UMCU",
                "Researchers employed outside of the UU and outside the UMCU"
              ]
            },
            "dta_mandatee_approval_required": {
              "type": "string",
              "enum": [
                "Yes"
              ],
              "default": "Yes",
              "title": "Should the DTA be signed off by mandatees (i.e. the responsible scientist and the authorized official)?"
            }
          }
        },
        {
          "properties": {
            "dta_type": {
              "enum": [
                "Other (please specify below)"
              ]
            },
            "dta_type_other": {
              "type": "string",
              "title": "Please describe the DTA to be used."
            },
            "dta_mandatee_approval_required": {
              "type": "string",
              "enum": [
                "Yes",
                "No"
              ],
              "title": "Should the DTA be signed off by mandatees (i.e. the responsible scientist and the authorized official)?"
            }
          },
          "required": [
            "dta_type_other",
            "dta_mandatee_approval_required"
          ]
        }
      ]
    }
  }
}
